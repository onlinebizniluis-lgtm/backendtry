<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trading OS</title>
    <link rel="icon" type="image/png" href="logo.png">
    <!-- 1. EXTERNAL LIBRARIES -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- 2. FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>

    <!-- 3. STYLESHEET -->

<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="skeleton.css">
<link rel="stylesheet" href="auth.css">
<link rel="stylesheet" href="calculator.css">
<link rel="stylesheet" href="terminal.css">
<link rel="stylesheet" href="logbook.css">
<link rel="stylesheet" href="debriefs.css">
<link rel="stylesheet" href="toasts.css">
<link rel="stylesheet" href="dashboard.css">

</head>
<body>

    <div id="trading-os-root">
  <div class="crt-overlay"></div>
  <div class="background-grid"></div>
  <div class="scanlines"></div>
  <div id="toast-container"></div>
  <div id="ticker-tooltip"></div>

  <!-- NEW: BOOT SCREEN -->
  <div id="boot-screen">
    <div
      id="boot-text"
      style="display: flex; flex-direction: column; gap: 5px"
    ></div>
  </div>

  <!-- SFX -->
  <audio
    id="sfx-hover"
    src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"
  ></audio>
  <audio
    id="sfx-win"
    src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"
  ></audio>
  <audio
    id="sfx-error"
    src="https://assets.mixkit.co/active_storage/sfx/950/950-preview.mp3"
  ></audio>

  <!-- 1. AUTH MODULE -->
  <div id="auth-module" class="auth-overlay">
    <div class="terminal-box">
      <div class="term-header">
        <div class="term-title">
          TRADING OS <span class="tag-pro">ELITE</span>
        </div>
        <div class="status-led">
          <div class="led-light"></div>
          SECURE
        </div>
      </div>
      <div class="term-body">
        <p
          class="sys-msg"
          style="
            color: #666;
            font-size: 10px;
            margin-bottom: 20px;
            font-family: var(--font-mono);
          "
        >
          >> BIOMETRIC HANDSHAKE REQUIRED
        </p>
        <div class="input-group">
          <label>OPERATOR ID</label
          ><input type="email" id="inp-email" placeholder="email@address.com" />
        </div>
        <div class="input-group">
          <label>ACCESS KEY</label
          ><input type="password" id="inp-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>
        <div
          class="action-row"
          style="
            margin-top: 30px;
            display: flex;
            justify-content: center;
            width: 100%;
          "
        >
          <button
            id="btn-login"
            class="btn-tech"
            style="width: 100%; justify-content: center"
          >
            <svg class="icon-svg" viewBox="0 0 24 24">
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
              <polyline points="10 17 15 12 10 7" />
              <line x1="15" y1="12" x2="3" y2="12" />
            </svg>
            INITIALIZE SYSTEM
          </button>
        </div>
        <div class="link-row">
          <button id="btn-guest" class="btn-link">ENTER GUEST MODE</button
          ><button
            type="button"
            onclick="window.openResetModal()"
            class="btn-link"
            style="color: var(--accent)"
          >
            RESET PASSWORD
          </button>
        </div>
        <div id="feedback-msg" class="feedback"></div>
      </div>
    </div>
  </div>

  <!-- 1.5. PORTFOLIO BRIDGE (ENHANCED) -->
  <div id="portfolio-bridge" class="auth-overlay" style="display: none">
    <div class="terminal-box">
      <div class="term-header">
        <div class="term-title">SELECT DATALINK</div>
        <div class="status-led" style="color: var(--accent)">CONNECTED</div>
      </div>
      <div class="term-body">
        <p
          class="sys-msg"
          style="
            color: #888;
            font-size: 10px;
            margin-bottom: 15px;
            font-family: var(--font-mono);
          "
        >
          AVAILABLE PORTFOLIOS:
        </p>

        <div id="port-list" class="port-list">
          <div style="padding: 20px; text-align: center; color: #444">
            SEARCHING...
          </div>
        </div>

        <div
          class="input-group"
          style="
            margin-top: 20px;
            border-top: 1px solid #222;
            padding-top: 20px;
          "
        >
          <label>ESTABLISH NEW CONNECTION</label>
          <div style="display: flex; gap: 10px">
            <input
              id="new-port-name"
              class="inp-std"
              placeholder="PORTFOLIO NAME (e.g., SCALPING)"
            />
            <button
              id="btn-create-port"
              class="btn-main"
              style="width: auto; padding: 0 20px; margin-top: 0"
            >
              +
            </button>
          </div>
        </div>
        <div
          style="
            text-align: center;
            margin-top: 10px;
            display: flex;
            gap: 10px;
            justify-content: center;
          "
        >
          <button id="btn-back-bridge" class="btn-link" style="display: none">
            RETURN
          </button>
          <button id="btn-logout-bridge" class="btn-link">
            TERMINATE SESSION
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 2. APP SHELL -->
  <div id="app-shell" class="app-layout" style="display: none">
    <!-- SIDEBAR -->
    <nav class="sidebar">
      <div class="brand-area">
        <div class="logo-container">
          <!-- IMAGE LOGO -->
          <img
            src="https://d1yei2z3i6k35z.cloudfront.net/15414650/692e3f7c07bcb_ChatGPTImageDec2202509_17_34AM.png"
            alt="Logo"
            style="
              height: 32px;
              width: 32px;
              object-fit: contain;
              filter: drop-shadow(0 0 5px rgba(0, 255, 157, 0.4));
            "
          />
        </div>
      </div>
      <div class="nav-menu">
        <button class="nav-btn active" data-target="tab-dash">DASHBOARD</button>
        <button class="nav-btn" data-target="tab-calc">CALCULATOR</button>
        <!-- NEW BUTTON -->
        <button class="nav-btn" data-target="tab-term">TERMINAL</button>
        <button class="nav-btn" data-target="tab-log">LOGBOOK</button>
        <button class="nav-btn" data-target="tab-sys">SYSTEM</button>
        <button class="nav-btn" data-target="tab-archive">DEBRIEFS</button>
        <button class="nav-btn" data-target="tab-inbox" id="nav-inbox-btn">
          INBOX
          <span id="inbox-badge" class="inbox-badge" style="display: none"
            >0</span
          >
        </button>
      </div>
      <div class="nav-bottom">
        <div
          class="user-badge"
          style="color: var(--accent)"
          id="active-port-name"
        >
          LOADING...
        </div>
        <button
          id="btn-switch-port"
          class="btn-logout"
          style="margin-bottom: 5px"
        >
          SWITCH
        </button>
        <button id="btn-logout" class="btn-logout">LOGOUT</button>
      </div>
    </nav>

    <!-- CONTENT -->
    <main class="content-area">
      <header class="top-bar">
        <div class="status-led">
          <div class="led-light"></div>
          <span id="connection-status" class="typewriter">SYSTEM ONLINE</span>
        </div>
        <div class="date-display" id="date-display">--/--/----</div>
      </header>

      <!-- TAB 1: DASHBOARD (ENHANCED) -->
      <section id="tab-dash" class="view-section active" style="display: block">
        <div class="focus-banner">
          <div class="focus-label">TACTICAL DIRECTIVE</div>
          <div class="focus-text" id="dash-focus">NO DIRECTIVE SET</div>
        </div>

        <!-- ANALYTICS TOGGLE -->
        <!-- ANALYTICS TOGGLE (TIME BASED) -->
        <div
          class="filter-bar"
          style="
            margin-bottom: 20px;
            background: transparent;
            border: none;
            padding: 0;
            align-items: center;
          "
        >
          <div class="filter-group">
            <span
              class="filter-label"
              style="color: var(--accent); letter-spacing: 1px"
              >PERIOD:</span
            >
            <button
              class="btn-sm active"
              id="btn-rng-all"
              onclick="window.setDashRange('all', this)"
            >
              ALL TIME
            </button>
            <button class="btn-sm" onclick="window.setDashRange('7', this)">
              7D
            </button>
            <button class="btn-sm" onclick="window.setDashRange('30', this)">
              30D
            </button>
            <button class="btn-sm" onclick="window.setDashRange('60', this)">
              60D
            </button>
            <button
              class="btn-sm"
              onclick="window.setDashRange('custom', this)"
            >
              CUSTOM
            </button>
          </div>
          <!-- Dynamic Date Display -->
          <div
            id="dash-date-label"
            style="
              margin-left: auto;
              font-size: 10px;
              color: #666;
              font-family: var(--font-mono);
            "
          >
            FULL HISTORY
          </div>
        </div>

        <!-- 1. MARKET SESSION HUD -->
        <div class="session-bar" id="market-sessions">
          <div class="sess-box" id="sess-syd">
            <div class="sess-status">‚óè</div>
            <div class="sess-title">SYDNEY</div>
            <div class="sess-time">22:00 UTC</div>
          </div>
          <div class="sess-box" id="sess-tok">
            <div class="sess-status">‚óè</div>
            <div class="sess-title">TOKYO</div>
            <div class="sess-time">00:00 UTC</div>
          </div>
          <div class="sess-box" id="sess-ldn">
            <div class="sess-status">‚óè</div>
            <div class="sess-title">LONDON</div>
            <div class="sess-time">08:00 UTC</div>
          </div>
          <div class="sess-box" id="sess-ny">
            <div class="sess-status">‚óè</div>
            <div class="sess-title">NEW YORK</div>
            <div class="sess-time">13:00 UTC</div>
          </div>
        </div>

        <!-- 2. DEEP ANALYTICS ROW (NOW WITH DISCIPLINE METER) -->
        <div class="analytics-row three-col">
          <!-- Card 1: Temporal -->
          <div class="ana-card">
            <div class="ana-head">
              TEMPORAL EDGE
              <span style="font-size: 9px; opacity: 0.6">NET R</span>
            </div>
            <div class="dow-grid" id="dow-chart">
              <div
                style="
                  width: 100%;
                  text-align: center;
                  color: #444;
                  font-size: 9px;
                  margin-top: 20px;
                "
              >
                AWAITING DATA
              </div>
            </div>
          </div>

          <!-- Card 2: Discipline Meter (NEW) -->
          <div
            class="ana-card"
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
            "
          >
            <div
              class="ana-head"
              style="width: 100%; text-align: center; margin-bottom: 20px"
            >
              PROTOCOL ADHERENCE
            </div>

            <div class="disc-wrapper">
              <div id="disc-ring-visual" class="disc-ring"></div>
              <div id="disc-val-text" class="disc-value">--%</div>
              <div id="disc-grade-text" class="disc-label">CALCULATING</div>
            </div>
          </div>

          <!-- Card 3: Current Form -->
          <div class="ana-card">
            <div class="ana-head">
              CURRENT FORM <span style="font-size: 9px; opacity: 0.6">L10</span>
            </div>
            <div class="form-ticker" id="form-ticker">
              <div
                style="
                  width: 100%;
                  text-align: center;
                  color: #444;
                  font-size: 9px;
                  margin-top: 20px;
                "
              >
                NO TRADES YET
              </div>
            </div>
            <div
              style="
                margin-top: 15px;
                font-size: 9px;
                color: #666;
                font-family: var(--font-mono);
              "
            >
              MOMENTUM: <span id="mom-signal" style="color: #fff">NEUTRAL</span>
            </div>

            <!-- Streak Widget -->
            <div
              style="
                margin-top: 12px;
                padding-top: 12px;
                border-top: 1px solid #1a1a1a;
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <div
                style="
                  font-size: 9px;
                  color: #555;
                  font-family: var(--font-mono);
                "
              >
                STREAK:
                <span id="val-cur-streak" style="color: #eee; font-weight: bold"
                  >0</span
                >
              </div>
              <div
                style="
                  font-size: 9px;
                  color: #555;
                  font-family: var(--font-mono);
                  text-align: right;
                "
                title="Expected Max Losing Streak"
              >
                EXP. MAX:
                <span
                  id="val-exp-streak"
                  style="color: var(--accent); font-weight: bold"
                  >-</span
                >
              </div>
            </div>
          </div>
        </div>

        <div class="kpi-grid">
          <!-- 1. P&L WITH INTEGRATED DRAWDOWN -->
          <div class="kpi-card" data-tooltip="Realized Profit in R-Multiples">
            <div class="kpi-lbl">NET P&L (R) <span>‚Ñπ</span></div>
            <div class="kpi-val">
              <span id="kpi-equity">0.0R</span>
              <div
                style="font-size: 10px; color: var(--error); margin-top: 2px"
              >
                DD: <span id="kpi-dd">0.0R</span>
              </div>
            </div>
          </div>

          <div
            class="kpi-card"
            data-tooltip="Percentage of trades ending in Profit"
          >
            <div class="kpi-lbl">WIN RATE <span>‚Ñπ</span></div>
            <div class="kpi-val" id="kpi-wr">0%</div>
          </div>
          <div class="kpi-card" data-tooltip="Gross Profit / Gross Loss">
            <div class="kpi-lbl">PROFIT FACTOR <span>‚Ñπ</span></div>
            <div class="kpi-val" id="kpi-pf">0.00</div>
          </div>
          <!-- NEW SMART CARDS -->
          <div class="kpi-card" id="card-best-pair">
            <div class="kpi-lbl">BEST PAIR</div>
            <div
              class="kpi-val"
              id="kpi-pair"
              style="font-size: 16px; color: var(--accent)"
            >
              --
            </div>
            <div class="freq-bar">
              <div class="freq-fill" id="bar-pair"></div>
            </div>
          </div>
          <div class="kpi-card" id="card-best-sess">
            <div class="kpi-lbl">BEST SESSION</div>
            <div
              class="kpi-val"
              id="kpi-sess"
              style="font-size: 16px; color: var(--accent)"
            >
              --
            </div>
            <div class="freq-bar">
              <div class="freq-fill" id="bar-sess"></div>
            </div>
          </div>

          <div class="kpi-card" data-tooltip="Average Reward per Trade">
            <div class="kpi-lbl">AVG WIN <span>‚Ñπ</span></div>
            <div class="kpi-val" id="kpi-avg">0.0R</div>
          </div>
        </div>
        <div class="dashboard-split">
          <div class="term-panel chart-panel">
            <div class="panel-head">PERFORMANCE CURVE</div>
            <div class="chart-container" id="chart-wrapper">
              <div id="chart-tooltip"></div>
              <div id="chart-crosshair"></div>
              <div id="chart-svg-host" style="width: 100%; height: 100%"></div>
            </div>
          </div>
          <div class="term-panel chart-panel">
            <div class="panel-head">EDGE FINDER</div>
            <div class="chart-container" id="setup-wrapper"></div>
          </div>
        </div>
      </section>

      <!-- TAB: CALCULATOR (NEW DEDICATED TAB) -->
      <!-- TAB: CALCULATOR (RE-DESIGNED) -->
      <section id="tab-calc" class="view-section">
        <div class="calc-wrapper">
          <!-- THE DEVICE -->
          <div class="calc-device">
            <!-- 1. Header -->
            <div class="calc-header-bar">
              <div class="calc-title">RISK_ENGINE</div>
              <div class="status-led">
                <div class="led-light"></div>
                READY
              </div>
            </div>

            <!-- 2. The Screen (Results) -->
            <div class="calc-screen">
              <div class="calc-lot-label">LOT SIZE</div>
              <div id="re-lots" class="calc-lot-display">0.00</div>

              <div class="calc-sub-screen">
                <div class="calc-stat-pill">
                  RISK: <strong id="re-cash">$0.00</strong>
                </div>
              </div>
            </div>

            <!-- 3. The Controls (Inputs) -->
            <div class="calc-body">
              <!-- Row 1: Account Stats -->
              <div class="calc-input-row">
                <div class="calc-group">
                  <label>ACCOUNT BALANCE</label>
                  <input
                    id="re-bal"
                    type="number"
                    class="calc-input"
                    placeholder="0.00"
                  />
                </div>
                <div class="calc-group">
                  <label>RISK %</label>
                  <input
                    id="re-risk"
                    type="number"
                    class="calc-input"
                    placeholder="1.0"
                    style="color: var(--accent)"
                  />
                </div>
              </div>

              <!-- Row 2: Asset Info -->
              <div class="calc-group">
                <label>ASSET / PAIR</label>
                <div class="search-wrap">
                  <!-- Re-using your existing search logic ID -->
                  <input
                    id="re-search"
                    type="text"
                    class="calc-input"
                    placeholder="SEARCH (E.G. XAUUSD)"
                    autocomplete="off"
                    style="text-align: left; text-transform: uppercase"
                  />
                  <input id="re-pipval" type="hidden" value="10" />
                  <div id="re-dropdown" class="search-results"></div>
                </div>
              </div>

              <!-- Row 3: Stop Loss -->
              <div class="calc-group">
                <label>STOP LOSS (PIPS / POINTS)</label>
                <input
                  id="re-sl"
                  type="number"
                  class="calc-input"
                  placeholder="0"
                />
              </div>

            <!-- 4. Footer -->
            <div class="calc-footer">
              LIVE PRICE FEED ACTIVE // FOREX ‚Ä¢ CRYPTO ‚Ä¢ INDICES
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 2: TERMINAL (ENHANCED) -->
      <section id="tab-term" class="view-section">
        <!-- ========================= -->
        <!--   PREPARED TRADE PLANS   -->
        <!-- ========================= -->

        <div
          class="sys-subtitle"
          style="
            margin: 0 auto 25px auto;
            text-align: center;
            font-size: 15px;
            letter-spacing: 1.2px;
            color: rgba(0, 255, 157, 0.85);
            font-weight: 500;
            width: 100%;
            max-width: 1400px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.12);
          "
        >
          PREPARED TRADE PLANS
        </div>

        <!-- SCROLL WRAPPER -->
        <div
          style="
            width: 100%;
            display: flex;
            justify-content: center;
            overflow: hidden;
          "
        >
          <div
            id="plannedTradeList"
            style="
              display: flex;
              gap: 20px;
              overflow-x: auto;
              scroll-behavior: smooth;
              padding: 10px;
              max-width: 1400px;
              width: 100%;
            "
          ></div>
        </div>

        <div id="carouselNav">
          <button
            id="carouselPrev"
            class="btn-tech btn-glow"
            style="width: 45px"
          >
            ‚óÑ
          </button>
          <button
            id="carouselNext"
            class="btn-tech btn-glow"
            style="width: 45px"
          >
            ‚ñ∫
          </button>
        </div>
        <!-- INITIATE PLAN BUTTON -->
        <div
          style="
            margin-top: 25px;
            width: 100%;
            display: flex;
            justify-content: center;
          "
        >
          <button id="btn-init-plan" class="btn-tech btn-glow">
            ‚ñ∫ INITIATE PLAN
          </button>
        </div>

        <!-- SPACER -->
        <div style="height: 65px"></div>

        <!-- ========================= -->
        <!--        OPEN TRADES        -->
        <!-- ========================= -->

        <div
          class="sys-subtitle"
          style="
            margin: 40px auto 25px auto;
            text-align: center;
            font-size: 15px;
            letter-spacing: 1.2px;
            color: rgba(0, 255, 157, 0.85);
            font-weight: 500;
            width: 100%;
            max-width: 1400px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.12);
          "
        >
          OPEN TRADES
        </div>

        <!-- Scroll wrapper (same as planned trades for consistency) -->
        <div
          style="
            width: 100%;
            display: flex;
            justify-content: center;
            overflow: hidden;
          "
        >
          <div
            id="openTradesList"
            style="
              display: flex;
              gap: 20px;
              overflow-x: auto;
              scroll-behavior: smooth;
              padding: 10px;
              max-width: 1400px;
              width: 100%;
              text-align: center;
              color: rgba(0, 255, 157, 0.45);
              font-size: 12px;
              font-family: var(--font-mono);
            "
          >
            No open trades yet.
          </div>
        </div>

        <!-- ADD id="openNavControls" HERE -->
        <div
          id="openNavControls"
          style="
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 30px;
          "
        >
          <button id="openPrev" class="btn-tech btn-glow" style="width: 45px">
            ‚óÑ
          </button>
          <button id="openNext" class="btn-tech btn-glow" style="width: 45px">
            ‚ñ∫
          </button>
        </div>
        <!-- Button (exact same wrapper as planned button) -->
        <div
          style="
            margin-top: 25px;
            width: 100%;
            display: flex;
            justify-content: center;
          "
        >
          <button id="btn-open-trade" class="btn-tech btn-glow">
            ‚ñ∫ OPEN TRADE
          </button>
        </div>

        <div class="terminal-grid" style="position: relative">
          <div id="ks-overlay" class="lock-overlay" style="display: none">
            <div class="lock-box">
              <div class="lock-icon">üîí</div>
              <h2>TRADING SUSPENDED</h2>
              <p>DAILY LOSS LIMIT REACHED.</p>
              <div class="timer-box">
                UNLOCKS IN: <span id="ks-timer">00:00:00</span>
              </div>
            </div>
          </div>
          <div id="checklist-module" class="term-panel">
            <div class="panel-head">
              <span>PRE-FLIGHT PROTOCOL</span>
              <!-- ADDED z-index:60 to ensure this is clickable above lock screen -->
              <button
                id="btn-strat-intel"
                class="btn-link"
                style="
                  position: relative;
                  z-index: 60;
                  color: var(--accent);
                  font-size: 9px;
                  border: 1px solid var(--accent-dim);
                  padding: 4px 8px;
                  border-radius: 3px;
                  background: rgba(0, 255, 157, 0.05);
                "
              >
                [ STRAT INTEL ]
              </button>
            </div>
            <!-- NEW PROGRESS BAR -->
            <div class="progress-track">
              <div class="progress-fill" id="chk-progress"></div>
            </div>
            <div class="checklist-stack">
              <div class="chk-item">
                <span class="chk-label">HTF BIAS ALIGNED</span>
                <div class="toggle-wrap" data-key="c_bias">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
              <div class="chk-item">
                <span class="chk-label">KEY LEVEL REACTION</span>
                <div class="toggle-wrap" data-key="c_level">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
              <div class="chk-item">
                <span class="chk-label">SETUP VALID</span>
                <div class="toggle-wrap" data-key="c_setup">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
              <div class="chk-item">
                <span class="chk-label">RR > 1:2</span>
                <div class="toggle-wrap" data-key="c_rr">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
              <div class="chk-item">
                <span class="chk-label">NO HIGH IMPACT NEWS</span>
                <div class="toggle-wrap" data-key="c_news">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
              <div class="chk-item">
                <span class="chk-label">MENTAL STATE OPTIMAL</span>
                <div class="toggle-wrap" data-key="c_mind">
                  <button class="tgl-btn" data-val="yes">YES</button
                  ><button class="tgl-btn" data-val="no">NO</button>
                </div>
              </div>
            </div>
            <div id="exec-status" class="status-bar bar-wait">WAITING (0%)</div>
            <button id="btn-reset-chk" class="btn-outline">
              RESET PROTOCOLS
            </button>
          </div>

          <div id="entry-module">
            <div id="tradeInputs_standard">
              <!-- EXECUTION MODE FIELDS -->
              <div class="term-panel">
                <div class="panel-head">
                  <span>TRADE PLAN INFO</span>
                  <span
                    id="loss-counter"
                    class="tag-pro"
                    style="color: var(--text-dim); border-color: var(--border)"
                    >LOSS: 0 / -</span
                  >
                </div>
                <div class="form-grid">
                  <!-- NEW SEARCHABLE INPUT -->
                  <div class="f-group">
                    <label>INSTRUMENT</label>
                    <div class="search-wrap">
                      <input
                        class="inp-std"
                        id="entry-pair"
                        data-key="j_pair"
                        placeholder="Type (e.g. EUR...)"
                        autocomplete="off"
                        style="text-transform: uppercase"
                      />
                      <div id="entry-pair-results" class="search-results"></div>
                    </div>
                  </div>

                  <div class="f-group">
                    <label>DIRECTION</label>
                    <select
                      id="j_direction"
                      class="inp-std"
                      data-key="j_direction"
                    >
                      <option value="">SELECT</option>
                      <option value="LONG">LONG</option>
                      <option value="SHORT">SHORT</option>
                    </select>
                  </div>

                  <!-- NEW FIXED CODE -->
                  <div class="f-group">
                    <label>SESSION</label>
                    <select class="inp-std" data-key="j_sess" id="j_sess">
                      <option value="" disabled selected>-- SELECT --</option>
                      <option value="LDN">LONDON</option>
                      <option value="NY">NEW YORK</option>
                      <option value="ASIA">ASIAN</option>
                    </select>
                  </div>
                  <div class="f-group">
                    <label>SETUP TYPE</label
                    ><select
                      class="inp-std"
                      id="term-setup-select"
                      data-key="j_setup"
                    >
                      <option value="General">General</option>
                    </select>
                  </div>
                  <div class="f-group">
                    <label>DATE</label
                    ><input
                      type="text"
                      class="inp-std inp-date-trigger"
                      id="j_date_display"
                      data-key="j_date"
                      readonly
                      placeholder="SELECT DATE"
                    />
                  </div>
                  <div class="f-group">
                    <label>OUTCOME</label>
                    <select class="inp-std" data-key="j_res" id="j_res">
                      <option value="">SELECT</option>
                      <option value="WIN">WIN</option>
                      <option value="LOSS">LOSS</option>
                      <option value="BE">BE</option>
                    </select>
                  </div>
                </div>
                <div class="f-group" style="margin-top: 10px">
                  <label>TRADE NOTES</label
                  ><textarea
                    class="inp-area"
                    data-key="j_notes"
                    placeholder="Notes..."
                  ></textarea>
                </div>
                <div class="f-group">
                  <label>PLAN EXPIRATION</label>
                  <select class="inp-std" id="plan_expiration">
                    <option value="24">24 Hours (Default)</option>
                    <option value="12">12 Hours</option>
                    <option value="48">48 Hours</option>
                    <option value="72">72 Hours</option>
                    <option value="168">1 Week</option>
                  </select>
                </div>

                <div class="f-group" style="margin-top: 10px">
                  <label>CHART LINK (OPTIONAL)</label
                  ><input
                    class="inp-std"
                    data-key="j_chart"
                    placeholder="Paste Image URL"
                  />
                </div>
                <button id="btn-save-trade" class="btn-main full-width mt-20">
                  COMMIT RECORD
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- PLANNING MODE (COMPACT GRID) -->
        <!-- PLANNING MODE (COMPACT 3-COLUMN LAYOUT) -->
        <div id="tradeInputs_plan" style="display: none">
          <!-- 3-COLUMN GRID CONTAINER -->
          <div class="compact-grid">
            <!-- Row 1: Basics -->
            <div class="f-group" style="margin: 0">
              <label>INSTRUMENT</label>
              <input
                id="plan_pair"
                class="inp-std"
                disabled
                style="opacity: 0.7"
              />
            </div>

            <div class="f-group" style="margin: 0">
              <label>DIRECTION</label>
              <select id="plan_direction" class="inp-std">
                <option value="LONG">LONG</option>
                <option value="SHORT">SHORT</option>
              </select>
            </div>

            <!-- NEW FIXED CODE -->
            <div class="f-group" style="margin: 0">
              <label>SESSION</label>
              <select id="plan_sess" class="inp-std">
                <option value="" disabled selected>-- SELECT --</option>
                <option value="LDN">LONDON</option>
                <option value="NY">NEW YORK</option>
                <option value="ASIA">ASIAN</option>
              </select>
            </div>

            <!-- Row 2: Details -->
            <div class="f-group" style="margin: 0">
              <label>SETUP TYPE</label>
              <select id="plan_setup" class="inp-std">
                <option value="General">General</option>
              </select>
            </div>

            <div class="f-group" style="margin: 0">
              <label>EXPIRATION</label>
              <select id="plan_expire" class="inp-std">
                <option value="24">24 Hours</option>
                <option value="12">12 Hours</option>
                <option value="48">48 Hours</option>
                <option value="168">1 Week</option>
              </select>
            </div>

            <div class="f-group" style="margin: 0">
              <label>DATE</label>
              <!-- Visual placeholder -->
              <input
                class="inp-std"
                value="AUTO-LOGGED"
                disabled
                style="opacity: 0.3; text-align: center; border-style: dashed"
              />
            </div>

            <!-- Row 3: Notes (Spans 3 Columns) -->
            <div class="f-group" style="grid-column: 1 / -1; margin: 0">
              <label>TRADE THESIS / NOTES</label>
              <textarea
                id="plan_notes"
                class="inp-area"
                placeholder="Describe entry trigger, invalidation, and confluence..."
              ></textarea>
            </div>

            <!-- Row 4: Chart (Spans 3 Columns) -->
            <div class="f-group" style="grid-column: 1 / -1; margin: 0">
              <label>CHART LINK (OPTIONAL)</label>
              <input
                id="plan_chart"
                class="inp-std"
                placeholder="Paste Image URL"
              />
            </div>
          </div>

          <!-- Save Button -->
          <button id="btn-save-plan" class="btn-main full-width">
            SAVE TRADE PLAN
          </button>
        </div>
      </section>

      <!-- TAB 3: LOGBOOK -->
      <section id="tab-log" class="view-section">
        <div class="term-panel full-height">
          <div class="panel-head">
            <span>TRADE DATABASE</span>
            <button
              id="btn-export"
              class="btn-link"
              style="color: var(--accent)"
            >
              [EXPORT CSV]
            </button>
          </div>
          <div class="filter-bar">
            <div class="filter-group">
              <span class="filter-label">VIEW:</span>
              <button class="btn-sm active" id="view-list">LIST</button>
              <button class="btn-sm" id="view-cal">CALENDAR</button>
            </div>
            <div
              style="width: 1px; height: 20px; background: #333; margin: 0 5px"
            ></div>
            <div class="filter-group">
              <span class="filter-label">PERIOD:</span>
              <button class="btn-sm active" data-range="all">ALL</button>
              <button class="btn-sm" data-range="30">30D</button>
              <button class="btn-sm" data-range="60">60D</button>
            </div>
            <div style="flex: 1"></div>
            <div class="filter-group">
              <input
                id="filter-pair"
                class="inp-sm"
                placeholder="PAIR"
                style="width: 60px"
              />
              <select id="filter-res" class="inp-sm">
                <option value="ALL">ALL</option>
                <option value="WIN">WIN</option>
                <option value="LOSS">LOSS</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table class="data-table" id="log-list-view">
              <thead>
                <tr>
                  <th>DATE</th>
                  <th>PAIR</th>
                  <th>SETUP</th>
                  <th>OUTCOME</th>
                  <th>RR</th>
                  <th>ACTION</th>
                </tr>
              </thead>
              <tbody id="log-body"></tbody>
            </table>
            <div id="log-calendar-view">
              <div class="cal-header">
                <button id="log-cal-prev" class="cal-btn">&#9664;</button>
                <span
                  id="log-cal-month"
                  style="font-weight: bold; color: #fff"
                ></span>
                <button id="log-cal-next" class="cal-btn">&#9654;</button>
              </div>
              <div class="cal-grid" style="margin-bottom: 5px">
                <div class="cal-day-header">S</div>
                <div class="cal-day-header">M</div>
                <div class="cal-day-header">T</div>
                <div class="cal-day-header">W</div>
                <div class="cal-day-header">T</div>
                <div class="cal-day-header">F</div>
                <div class="cal-day-header">S</div>
              </div>
              <div id="log-cal-grid" class="log-cal-grid"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 4: SYSTEM (ENHANCED PREMIUM UI + PLAYBOOK) -->
      <!-- TAB 4: SYSTEM (OPTIMIZED UI) -->
      <!-- TAB 4: SYSTEM (PREMIUM UI - NO EMOJIS) -->
      <section id="tab-sys" class="view-section">
        <div class="sys-grid-split">
          <!-- 1. GLOBAL PARAMETERS CARD (FULL WIZARD BLOCK) -->
          <!-- 1. GLOBAL PARAMETERS CARD (UPDATED WITH CLICKABLE GENERATOR) -->
          <div class="sys-card">
            <div class="sys-card-header">
              <div class="sys-card-title">
                <svg class="icon-svg large" viewBox="0 0 24 24">
                  <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                  <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"
                  />
                </svg>
                SYSTEM INITIALIZATION
              </div>

              <div style="display: flex; gap: 10px; align-items: center">
                <!-- GENERATE ID BUTTON (Now with z-index:60 to sit ABOVE the lock overlay) -->
                <button
                  class="btn-ghost"
                  onclick="window.generateSystemCard()"
                  style="
                    font-size: 9px;
                    padding: 4px 8px;
                    border-color: var(--accent);
                    color: var(--accent);
                    position: relative;
                    z-index: 60;
                    cursor: pointer;
                  "
                >
                  üìá GENERATE ID
                </button>

                <!-- STATUS BADGE -->
                <span id="params-status" class="status-badge locked"
                  >SYSTEM LOCKED</span
                >
              </div>
            </div>

            <!-- LOCK OVERLAY -->
            <div
              id="params-overlay"
              class="lock-overlay"
              style="display: none; z-index: 10"
            >
              <div
                class="lock-box"
                onclick="
                  this.classList.add('access-denied');
                  setTimeout(() => this.classList.remove('access-denied'), 400);
                  document.getElementById('sfx-error').play();
                "
              >
                <div class="lock-icon-container">
                  <svg class="lock-svg" viewBox="0 0 24 24">
                    <path
                      d="M12 17v-3m0-4c-2.209 0-4-1.791-4-4V5a4 4 0 1 1 8 0v1c0 2.209-1.791 4-4 4zm-6 4v8h12v-8H6z"
                    ></path>
                  </svg>
                </div>
                <h2>CONFIGURATION ACTIVE</h2>
                <div class="cooldown-wrapper">
                  <div id="strat-bar" class="cooldown-fill"></div>
                </div>
                <div class="cooldown-text" id="strat-timer">
                  SYNCING CYCLE...
                </div>
              </div>
            </div>

            <div class="sys-card-body">
              <div class="config-wizard-container">
                <!-- PROGRESS DOTS -->
                <div class="wiz-progress-track">
                  <div class="wiz-step-dot active" id="dot-1"></div>
                  <div class="wiz-step-dot" id="dot-2"></div>
                  <div class="wiz-step-dot" id="dot-3"></div>
                  <div class="wiz-step-dot" id="dot-4"></div>
                </div>

                <!-- STEP 1: IDENTITY -->
                <div class="config-step active" id="c-step-1">
                  <div class="step-header">STEP 01 // IDENTITY</div>
                  <div class="step-desc">
                    Name your system. This defines the protocol you are
                    executing (e.g., "Silver Bullet", "ICT Scalping").
                  </div>
                  <input
                    class="sys-inp sys-inp-tech inp-hero"
                    data-key="s_style"
                    placeholder="SYSTEM NAME"
                  />
                </div>

                <!-- STEP 2: RISK PARAMETERS -->
                <div class="config-step" id="c-step-2">
                  <div class="step-header">STEP 02 // RISK PARAMETERS</div>
                  <div class="step-desc">
                    Define your hard stops. The system will calculate position
                    sizes based on these limits.
                  </div>

                  <div
                    style="
                      display: grid;
                      grid-template-columns: 1fr 1fr;
                      gap: 30px;
                    "
                  >
                    <div>
                      <label class="input-label-tech">RISK PER TRADE (%)</label>
                      <input
                        class="sys-inp sys-inp-tech inp-hero"
                        data-key="s_risk"
                        type="number"
                        placeholder="1.0"
                      />
                    </div>
                    <div>
                      <label
                        class="input-label-tech"
                        style="color: var(--error)"
                        >MAX DAILY LOSS</label
                      >
                      <input
                        class="sys-inp sys-inp-tech inp-hero"
                        data-key="s_max_loss"
                        type="number"
                        placeholder="3"
                      />
                    </div>
                  </div>
                </div>

                <!-- STEP 3: STRATEGY DEFINITION -->
                <!-- STEP 3: STRATEGY DEFINITION (BUILDER MODE) -->
                <div class="config-step" id="c-step-3">
                  <div class="step-header">STEP 03 // STRATEGY DEFINITION</div>
                  <div class="step-desc">
                    Define your valid entry models. These will become the only
                    allowed options in your trade logger.
                  </div>

                  <!-- Input Row -->
                  <div class="strat-builder-row">
                    <input
                      type="text"
                      id="strat-input-field"
                      class="strat-builder-input"
                      placeholder="ENTER STRATEGY NAME (e.g., 'Silver Bullet')"
                    />
                    <button
                      type="button"
                      id="btn-add-strat-tag"
                      class="btn-add-strat"
                    >
                      +
                    </button>
                  </div>

                  <!-- Visual List of Strategies -->
                  <div id="strat-list-display" class="strat-tag-container">
                    <div
                      style="
                        width: 100%;
                        text-align: center;
                        color: #444;
                        font-size: 10px;
                        padding-top: 30px;
                      "
                    >
                      NO STRATEGIES DEFINED
                    </div>
                  </div>

                  <!-- HIDDEN INPUT: This collects the tags into a string for the database -->
                  <input
                    type="hidden"
                    class="sys-inp"
                    data-key="s_setups"
                    id="hidden_s_setups"
                  />
                </div>

                <!-- STEP 4: CAPACITY & SAVE -->
                <!-- STEP 4: CAPACITY & SAVE -->
                <div class="config-step" id="c-step-4">
                  <div class="step-header">STEP 04 // OPERATIONAL LIMITS</div>
                  <div class="step-desc">
                    Set operational ceilings to prevent overtrading.
                  </div>

                  <div
                    style="
                      display: grid;
                      grid-template-columns: 1fr 1fr;
                      gap: 30px;
                      margin-bottom: 20px;
                    "
                  >
                    <div>
                      <label class="input-label-tech">MAX PLANNED TRADES</label>
                      <input
                        id="maxPlannedTrades"
                        class="sys-inp sys-inp-tech inp-hero"
                        type="number"
                        placeholder="2"
                      />
                    </div>
                    <div>
                      <label class="input-label-tech">MAX OPEN TRADES</label>
                      <input
                        id="maxOpenTrades"
                        class="sys-inp sys-inp-tech inp-hero"
                        type="number"
                        placeholder="1"
                      />
                    </div>
                  </div>

                  <!-- NEW: MONDAY WARNING BOX -->
                  <div class="hazard-box">
                    <div class="hazard-icon">‚ö†</div>
                    <div class="hazard-content">
                      <h4>Protocol Lock Active</h4>
                      <p>
                        Data entered here will be
                        <strong>LOCKED until next Monday (00:00 UTC)</strong>.
                        Ensure all parameters (Risk, Strategy, Limits) are
                        final. <br /><span style="opacity: 0.6"
                          >(Admins cannot unlock this for you.)</span
                        >
                      </p>
                    </div>
                  </div>

                  <button
                    id="btn-save-strat"
                    class="btn-tech"
                    style="width: 100%; height: 50px; font-size: 12px"
                  >
                    <svg class="icon-svg" viewBox="0 0 24 24">
                      <path
                        d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                      />
                      <polyline points="17 21 17 13 7 13 7 21" />
                      <polyline points="7 3 7 8 15 8" />
                    </svg>
                    INITIALIZE & LOCK PARAMETERS
                  </button>
                </div>

                <!-- NAVIGATION BUTTONS -->
                <div class="wiz-nav">
                  <button
                    class="btn-nav"
                    id="wiz-prev"
                    onclick="window.changeConfigStep(-1)"
                  >
                    BACK
                  </button>
                  <button
                    class="btn-nav next"
                    id="wiz-next"
                    onclick="window.changeConfigStep(1)"
                  >
                    NEXT STEP >>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 2. WEEKLY REVIEW CARD -->
          <div class="sys-card" id="weekly-review-card">
            <div class="sys-card-header">
              <div class="sys-card-title">
                <svg class="icon-svg large" viewBox="0 0 24 24">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                  <line x1="16" y1="2" x2="16" y2="6" />
                  <line x1="8" y1="2" x2="8" y2="6" />
                  <line x1="3" y1="10" x2="21" y2="10" />
                </svg>
                WEEKLY PERFORMANCE AUDIT
              </div>
              <span id="weekly-status" class="status-badge">OPEN</span>
            </div>

            <!-- LOCK OVERLAY (Hidden by default, appears AFTER archiving) -->
            <div
              id="weekly-overlay"
              class="lock-overlay"
              style="display: none; z-index: 10"
            >
              <div
                class="lock-box"
                onclick="
                  this.classList.add('access-denied');
                  setTimeout(() => this.classList.remove('access-denied'), 400);
                  document.getElementById('sfx-error').play();
                "
              >
                <div class="lock-icon-container" style="color: var(--accent)">
                  <svg class="lock-svg" viewBox="0 0 24 24">
                    <path
                      d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                    ></path>
                  </svg>
                </div>
                <h2>DATA ARCHIVED</h2>
                <div class="cooldown-wrapper">
                  <div
                    id="weekly-bar"
                    class="cooldown-fill"
                    style="
                      background: var(--accent);
                      box-shadow: 0 0 10px var(--accent);
                    "
                  ></div>
                </div>
                <div class="cooldown-text" id="weekly-timer">
                  Recharging Cycle...
                </div>
              </div>
            </div>

            <div
              class="sys-card-body"
              style="
                padding: 0;
                position: relative;
                height: 100%;
                min-height: 350px;
              "
            >
              <!-- 1. START SCREEN (Visible by default) -->
              <div
                id="review-start-view"
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  height: 100%;
                  padding: 30px;
                  text-align: center;
                "
              >
                <!-- Icon / Spinner Container -->
                <div
                  id="wiz-icon-container"
                  style="margin-bottom: 25px; opacity: 0.8"
                >
                  <!-- Static Icon (Visible Initially) -->
                  <div id="wiz-static-icon">
                    <svg
                      style="width: 40px; height: 40px; stroke: var(--accent)"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                    >
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                  </div>
                  <!-- Spinner (Hidden Initially) -->
                  <div
                    id="wiz-loading-spinner"
                    class="wiz-loader"
                    style="display: none"
                  ></div>
                </div>

                <!-- Status Text -->
                <div
                  id="wiz-start-text"
                  style="
                    font-size: 10px;
                    color: #666;
                    margin-bottom: 25px;
                    max-width: 260px;
                    line-height: 1.8;
                    font-family: var(--font-mono);
                    letter-spacing: 1px;
                  "
                >
                  WEEKLY_AUDIT<br />
                  <span style="color: #444">[ STATUS: PENDING ]</span><br />
                  SYSTEM WILL ANALYZE LOGS, ASSIGN ARCHETYPE, AND EXTRACT KEY
                  PERFORMANCE INDICATORS.
                </div>

                <!-- The Trigger Button -->
                <button
                  id="btn-start-audit"
                  class="btn-tech btn-glow"
                  onclick="window.startWeeklyWizard()"
                >
                  EXECUTE AUDIT SEQUENCE
                </button>
              </div>

              <!-- 2. WIZARD CONTAINER (Hidden initially) -->
              <div
                id="review-wizard"
                class="review-wizard-container"
                style="display: none"
              >
                <!-- STEP 1: ARCHETYPE -->
                <div id="step-archetype" class="review-step">
                  <div class="archetype-card">
                    <div class="archetype-sub">CALCULATED IDENTITY</div>
                    <div class="archetype-title" id="wiz-archetype">
                      CALCULATING...
                    </div>
                    <div class="archetype-stats" id="wiz-stats">--</div>
                  </div>
                  <button
                    class="btn-tech"
                    onclick="window.nextReviewStep('step-win')"
                  >
                    BEGIN DATA REVIEW >>
                  </button>
                </div>

                <!-- STEP 2: WIN -->
                <div id="step-win" class="review-step">
                  <div class="audit-box">
                    <div class="audit-question">
                      SYSTEM IDENTIFIED YOUR
                      <strong>OPTIMAL EXECUTION</strong>.<br /><span
                        style="color: #666; font-size: 9px"
                        >RECOGNIZE THIS SETUP?</span
                      >
                    </div>
                    <div
                      id="wiz-win-img-container"
                      class="wizard-chart-box"
                    ></div>
                    <div class="audit-data" id="wiz-win-data">--</div>
                    <div
                      style="
                        font-size: 9px;
                        color: var(--accent);
                        margin-bottom: 6px;
                        text-align: left;
                        font-family: var(--font-mono);
                      "
                    >
                      DECODE THE SUCCESS (REQUIRED):
                    </div>
                    <textarea
                      class="wizard-reflection"
                      id="wiz-win-reflection"
                      placeholder="Trigger? Mental state? Technicals?"
                    ></textarea>
                    <div class="audit-actions">
                      <button
                        class="btn-tech"
                        onclick="window.saveWinDebrief()"
                        style="width: 100%"
                      >
                        LOG SUCCESS & CONTINUE >>
                      </button>
                    </div>
                  </div>
                  <div style="margin-top: 5px">
                    <span
                      style="font-size: 9px; color: #333; cursor: pointer"
                      onclick="window.manualOverride('win')"
                      >[ ERROR: INCORRECT DATA ]</span
                    >
                  </div>
                </div>

                <!-- STEP 3: MISTAKE -->
                <div id="step-mistake" class="review-step">
                  <div class="audit-box">
                    <div
                      class="audit-question"
                      style="border-left-color: var(--error)"
                    >
                      <span style="color: var(--error)"
                        >PROTOCOL LEAK DETECTED.</span
                      ><br /><span style="color: #666; font-size: 9px"
                        >THIS IS YOUR BLIND SPOT.</span
                      >
                    </div>
                    <div
                      id="wiz-loss-img-container"
                      class="wizard-chart-box"
                      style="border-color: rgba(255, 68, 68, 0.2)"
                    ></div>
                    <div
                      class="audit-data"
                      id="wiz-loss-data"
                      style="
                        border-left-color: var(--error);
                        background: rgba(255, 68, 68, 0.05);
                        color: #ff8888;
                      "
                    >
                      --
                    </div>
                    <div
                      style="
                        font-size: 9px;
                        color: var(--error);
                        margin-bottom: 6px;
                        text-align: left;
                        font-family: var(--font-mono);
                      "
                    >
                      ROOT CAUSE ANALYSIS (REQUIRED):
                    </div>
                    <textarea
                      class="wizard-reflection"
                      id="wiz-mistake-reflection"
                      placeholder="FOMO? Revenge? Hesitation?"
                    ></textarea>

                    <div class="audit-actions">
                      <!-- UPDATED BUTTON: Calls saveMistakeDebrief() instead of nextReviewStep() -->
                      <button
                        class="btn-tech"
                        style="
                          border-color: var(--error);
                          color: var(--error);
                          background: rgba(255, 68, 68, 0.05);
                        "
                        onclick="window.saveMistakeDebrief()"
                      >
                        ACKNOWLEDGE & PROCEED >>
                      </button>
                    </div>
                  </div>
                  <div style="margin-top: 5px">
                    <span
                      style="font-size: 9px; color: #333; cursor: pointer"
                      onclick="window.manualOverride('loss')"
                      >[ OVERRIDE DATA ]</span
                    >
                  </div>
                </div>

                <!-- STEP 4: DIRECTIVE -->
                <div id="step-focus" class="review-step">
                  <div class="audit-box">
                    <div class="audit-question">
                      SET YOUR <strong>PRIMARY DIRECTIVE</strong> FOR NEXT
                      CYCLE:
                    </div>
                    <textarea
                      class="wizard-reflection"
                      id="wiz-focus-input"
                      placeholder="e.g., 'I will not trade before 9:30 AM EST'..."
                      style="margin-bottom: 15px; height: 80px"
                    ></textarea>
                    <button
                      class="btn-tech btn-glow"
                      onclick="window.finalizeWeeklyReview()"
                    >
                      üîí ENCRYPT & ARCHIVE
                    </button>
                  </div>
                </div>
              </div>

              <!-- 3. HIDDEN LEGACY FORM (Required for saving logic) -->
              <!-- 3. HIDDEN FORM (Updated to store Charts) -->
              <div id="legacy-review-form" style="display: none">
                <!-- Text Data -->
                <textarea
                  class="wk-inp"
                  data-key="w_win"
                  id="hidden_w_win"
                ></textarea>
                <textarea
                  class="wk-inp"
                  data-key="w_err"
                  id="hidden_w_err"
                ></textarea>
                <textarea
                  class="wk-inp"
                  data-key="w_focus"
                  id="hidden_w_focus"
                ></textarea>

                <!-- NEW: Image Data (Stores the URL) -->
                <textarea
                  class="wk-inp"
                  data-key="w_win_img"
                  id="hidden_w_win_img"
                ></textarea>
                <textarea
                  class="wk-inp"
                  data-key="w_err_img"
                  id="hidden_w_err_img"
                ></textarea>

                <button id="btn-save-weekly"></button>
              </div>
            </div>
          </div>
        </div>

        <!-- 3. THE PLAYBOOK -->
        <!-- 3. THE ARSENAL (GAMIFIED PLAYBOOK) -->
        <div
          class="term-panel full-height"
          style="
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
          "
        >
          <!-- A. XP & ENERGY HEADER -->
          <div class="xp-container">
            <div class="level-badge" id="player-level">1</div>
            <div class="xp-track-wrapper">
              <div class="xp-meta">
                <span id="player-rank">NOVICE OPERATOR</span>
                <span id="xp-text">0 / 100 XP</span>
              </div>
              <div class="xp-bar-bg">
                <div class="xp-bar-fill" id="xp-bar"></div>
              </div>
            </div>

            <!-- STAMINA (BUILDERS) -->
            <div
              class="stamina-container"
              title="Energy recharges +1 every 4 hours"
            >
              <span class="stamina-label">ENERGY</span>
              <div class="stamina-pip active" id="stam-1"></div>
              <div class="stamina-pip active" id="stam-2"></div>
              <div class="stamina-pip active" id="stam-3"></div>
            </div>

            <button id="btn-forge-rule" class="btn-tech" style="height: 34px">
              + FORGE PROTOCOL
            </button>
          </div>

          <!-- B. ACTIVE BOUNTY -->
          <div class="bounty-box">
            <div class="bounty-info">
              <h3>‚ö† WEEKLY DISCOVERY ACTIVE</h3>
              <p id="bounty-target">DISCOVER: "SCANNING..."</p>
            </div>
            <div class="bounty-reward">
              <div class="xp-tag">+500 DATA POINTS</div>
              <div style="font-size: 9px; color: #666; margin-top: 4px">
                REWARD
              </div>
            </div>
          </div>

          <!-- C. FILTERS -->
          <div class="filter-bar" style="padding: 0 20px; border: none">
            <div class="filter-group">
              <button
                class="btn-sm active"
                onclick="window.filterArsenal('all', this)"
              >
                ALL CARDS
              </button>
              <button
                class="btn-sm"
                onclick="window.filterArsenal('entry', this)"
              >
                ENTRY
              </button>
              <button
                class="btn-sm"
                onclick="window.filterArsenal('patterns', this)"
              >
                PATTERNS
              </button>
              <button
                class="btn-sm"
                onclick="window.filterArsenal('mistakes', this)"
              >
                MISTAKES
              </button>
            </div>
          </div>

          <!-- D. CARD GRID -->
          <div
            id="arsenal-scroll-container"
            style="overflow-y: auto; flex: 1; margin-top: 10px"
          >
            <div id="arsenal-grid" class="arsenal-grid">
              <div style="text-align: center; padding: 40px; color: #444">
                INITIALIZING ARSENAL...
              </div>
            </div>
          </div>
        </div>

        <!-- LEVEL UP OVERLAY -->
        <div id="lvl-up-overlay" class="reward-overlay">
          <div class="reward-title">LEVEL UP!</div>
          <div class="reward-sub" id="lvl-up-rank">NEW RANK: OPERATOR</div>
        </div>
      </section>
      <!-- TAB 5: ARCHIVE (NEW TAB) -->

      <!-- TAB 5: TACTICAL DEBRIEFS (Formerly Archive) -->
      <section id="tab-archive" class="view-section">
        <div class="term-panel full-height">
          <div class="panel-head">
            <span>WEEKLY PERFORMANCE RECORDS</span>
            <div style="font-size: 9px; color: #666">
              <span id="archive-count">0</span> LOGS FOUND
            </div>
          </div>

          <!-- Filter/Search Bar for Archive -->
          <div
            class="filter-bar"
            style="border: none; padding: 0; margin-bottom: 20px"
          >
            <div class="filter-group">
              <span class="filter-label">SORT:</span>
              <button class="btn-sm active">NEWEST</button>
              <button class="btn-sm">OLDEST</button>
            </div>
          </div>

          <!-- The Grid Container -->
          <div id="weekly-archive-grid" class="debrief-grid">
            <!-- JavaScript will populate cards here -->
            <div class="empty-archive">
              NO DEBRIEFS RECORDED.<br />
              <span style="font-size: 10px"
                >COMPLETE A WEEKLY AUDIT IN THE 'SYSTEM' TAB.</span
              >
            </div>
          </div>
        </div>
      </section>

      <!-- TAB 6: INBOX (NEW) -->
      <section id="tab-inbox" class="view-section">
        <div class="term-panel full-height">
          <div class="panel-head">
            <span>TRADE PLAN INBOX</span>
            <span id="inbox-counter" style="font-size: 10px; opacity: 0.6"
              >0 NOTIFICATIONS</span
            >
          </div>

          <div class="filter-bar">
            <div class="filter-group">
              <span class="filter-label">FILTER:</span>
              <button
                class="btn-sm active"
                onclick="window.filterInbox('all', this)"
              >
                ALL
              </button>
              <button
                class="btn-sm"
                onclick="window.filterInbox('warning', this)"
              >
                EXPIRING SOON
              </button>
              <button
                class="btn-sm"
                onclick="window.filterInbox('expired', this)"
              >
                EXPIRED
              </button>
            </div>
          </div>

          <div id="inbox-list" style="padding: 20px">
            <div class="empty-inbox">
              <svg
                style="
                  width: 40px;
                  height: 40px;
                  opacity: 0.3;
                  margin-bottom: 10px;
                "
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
              >
                <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
              </svg>
              <div>NO NOTIFICATIONS</div>
            </div>
          </div>
        </div>
      </section>

      <!-- UNIVERSAL IMAGE PREVIEW MODAL -->
      <div id="imgPreviewModal" class="sys-modal hidden" style="display: none">
        <div class="imgPreview-overlay"></div>

        <div class="imgPreview-content">
          <img id="imgPreviewTarget" src="" />
          <div class="imgPreview-footer">
            Scroll to zoom ‚Ä¢ Click outside to close
          </div>
        </div>
      </div>
      <div id="imageZoomModal" class="img-zoom-overlay hidden">
        <img id="zoomedImage" class="zoom-content" />
      </div>

      <!-- FIXED EXECUTION MODAL -->
      <!-- FIXED EXECUTION MODAL -->
      <div
        id="tradeInputs_execution"
        class="sys-modal-overlay"
        style="display: none; justify-content: center; align-items: center"
      >
        <div
          class="sys-modal"
          style="width: 500px; overflow: hidden; border-radius: 4px"
        >
          <!-- 1. HEADER -->
          <div class="exec-header">
            <div class="exec-header-info">
              <span class="exec-label">EXECUTING PLAN</span>
              <div id="exec-dynamic-title" class="exec-asset">
                <!-- JS Injects: EURUSD <span badge>LONG</span> -->
                LOADING...
              </div>
            </div>
            <button
              id="close-execution-modal"
              style="
                background: none;
                border: none;
                color: #444;
                cursor: pointer;
                font-size: 14px;
              "
            >
              ‚úï
            </button>
          </div>

          <!-- 2. SCROLLABLE BODY -->
          <div class="exec-body">
            <!-- Row 1: Session & Direction -->
            <div class="exec-grid-row">
              <!-- OLD INCORRECT CODE -->
              <!-- NEW FIXED CODE -->
              <div class="exec-group">
                <label>SESSION OPENED</label>
                <select id="execution_session" class="exec-input">
                  <option value="" disabled selected>-- SELECT --</option>
                  <option value="LDN">LONDON</option>
                  <option value="NY">NEW YORK</option>
                  <option value="ASIA">ASIAN</option>
                </select>
              </div>

              <div class="exec-group">
                <label>DIRECTION</label>
                <select id="execution_direction" class="exec-input">
                  <option value="LONG">LONG</option>
                  <option value="SHORT">SHORT</option>
                </select>
              </div>
            </div>

            <!-- Row 2: Confidence (Contained Module) -->
            <div class="conf-module">
              <div class="conf-header">
                <label style="margin: 0; color: var(--accent)"
                  >CONFIDENCE LEVEL</label
                >
                <span
                  id="execution_conf_value"
                  style="color: #fff; font-weight: bold"
                  >5/10</span
                >
              </div>
              <input
                type="range"
                id="execution_confidence"
                class="tech-slider"
                min="1"
                max="10"
                value="5"
              />
            </div>

            <!-- Row 3: Notes -->
            <div class="exec-group">
              <label>ENTRY THESIS / NOTES</label>
              <textarea
                id="execution_notes"
                class="exec-input"
                placeholder="Why are you executing now?"
              ></textarea>
            </div>

            <!-- Row 4: Chart Link -->
            <div class="exec-group">
              <label>SCREENSHOT (OPTIONAL)</label>
              <input
                id="execution_chart"
                class="exec-input"
                placeholder="Paste TradingView link"
              />
            </div>
          </div>

          <!-- 3. FOOTER ACTIONS -->
          <div class="exec-footer">
            <button id="btn-cancel-execution" class="btn-exec-cancel">
              CANCEL
            </button>
            <button id="btn-save-execution" class="btn-exec-primary">
              <span>‚ñ∂</span> EXECUTE TRADE
            </button>
          </div>
        </div>
      </div>

      <!-- ================= OPEN TRADE MODAL (REQUIRED) ================= -->
      <div
        id="openTradeModal"
        class="sys-modal-overlay hidden"
        style="display: none"
      >
        <div class="sys-modal" style="width: 500px">
          <div class="modal-inner">
            <div class="modal-title">
              <span>SELECT TRADE PLAN</span>
              <!-- Close X Button -->
              <button
                class="btn-ghost"
                id="closeOpenTradeModal"
                style="
                  position: absolute;
                  right: 20px;
                  top: 20px;
                  padding: 5px 10px;
                "
              >
                ‚úñ
              </button>
            </div>

            <!-- List Container -->
            <div
              class="modal-body"
              id="openTradeList"
              style="max-height: 400px; overflow-y: auto; padding-top: 10px"
            >
              <!-- JavaScript will populate trade plans here -->
            </div>

            <div class="modal-actions">
              <!-- Cancel Button -->
              <button class="btn-modal" id="closeOpenTradeModalBtn">
                CANCEL
              </button>
              <!-- Proceed Button -->
              <button class="btn-modal primary" id="btnProceedOpen" disabled>
                PROCEED TO EXECUTION
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- HIDDEN STAGE FOR GENERATING IMAGES -->
      <!-- HIDDEN STAGE FOR GENERATING IMAGES -->
      <div id="share-card-stage">
        <div class="share-header">
          <div class="share-brand">TRADING OS // INTEL</div>
          <div class="share-rank" id="sc-rank">OPERATOR</div>
        </div>

        <div class="share-body">
          <div style="margin-bottom: 5px">
            <div class="share-type" id="sc-type">ENTRY PROTOCOL</div>
            <div class="share-title" id="sc-title">PROTOCOL NAME</div>
          </div>

          <!-- THIS WAS MISSING BEFORE -->
          <div class="share-img-container">
            <img id="sc-img" src="" crossorigin="anonymous" />
          </div>

          <div class="share-desc" id="sc-desc">Description goes here...</div>
        </div>

        <div class="share-footer">
          <!-- CHANGED LABEL -->
          <div class="share-stat">
            CLEARANCE<br /><strong id="sc-rarity">ALPHA</strong>
          </div>
          <div class="share-stat">
            DATA ID<br /><strong id="sc-id">#0000</strong>
          </div>
        </div>
      </div>

      <!-- INTEL INSPECTION MODAL -->
      <!-- INTEL INSPECTION MODAL (FIXED IDs) -->
      <div
        id="intel-preview-modal"
        class="sys-modal-overlay"
        style="
          display: none;
          backdrop-filter: blur(15px);
          background: rgba(0, 0, 0, 0.85);
        "
      >
        <div class="intel-modal-content">
          <!-- THE CARD TO BE RENDERED -->
          <div id="intel-card-visual">
            <div class="intel-header">
              <div class="intel-brand">TRADING OS // ARSENAL</div>
              <div class="intel-rank" id="i-rank">OPERATOR</div>
            </div>

            <div class="intel-body">
              <div class="intel-text-group">
                <div class="intel-type" id="i-type">ENTRY PROTOCOL</div>
                <div class="intel-title" id="i-title">Sample Protocol</div>
                <div class="intel-desc" id="i-desc">Description text...</div>
              </div>
              <div class="intel-img-box">
                <img id="intel-img-target" src="" crossorigin="anonymous" />
              </div>
            </div>

            <div class="intel-footer">
              <!-- THIS ID WAS MISSING OR WRONG -->
              <div class="intel-stat">
                CLEARANCE<br /><strong id="i-rarity">ALPHA</strong>
              </div>
              <div class="intel-stat">
                DATA ID<br /><strong id="i-id">#0000</strong>
              </div>
            </div>
          </div>

          <!-- ACTION BUTTONS -->
          <div class="intel-actions">
            <button
              class="btn-modal"
              onclick="
                document.getElementById('intel-preview-modal').style.display =
                  'none'
              "
            >
              CLOSE
            </button>
            <button class="btn-modal primary" id="btn-download-intel">
              ‚¨á DOWNLOAD CARD
            </button>
          </div>
        </div>
      </div>

      <!-- GLOBAL LOCK SCREEN -->
      <div id="global-processing-overlay" class="processing-overlay">
        <div class="processing-box">
          <div class="processing-spinner"></div>
          <div id="processing-text" class="processing-text">SAVING DATA...</div>
          <div class="processing-sub">DO NOT CLOSE WINDOW</div>
        </div>
      </div>
    </main>

    <!-- ============================================== -->
    <!--   HIDDEN SYSTEM ID GENERATOR (DO NOT MOVE)     -->
    <!-- ============================================== -->

    <!-- 1. The Card Stage (Rendered Off-Screen) -->
    <div id="system-card-stage">
      <div class="sys-id-header">
        <div>
          <div class="sys-id-brand">TRADING OS // PROTOCOL LICENSE</div>
          <div class="sys-id-title" id="sc-sys-name">SYSTEM NAME</div>
        </div>
        <div class="sys-id-rank">
          <div class="sys-id-rank-lbl">OPERATOR TIER</div>
          <div class="sys-id-rank-val" id="sc-sys-rank">NOVICE</div>
        </div>
      </div>

      <div class="sys-id-grid">
        <div class="sys-id-box">
          <span class="sys-id-label">RISK PER TRADE</span>
          <div class="sys-id-val" id="sc-sys-risk">1.0%</div>
        </div>
        <div class="sys-id-box">
          <span class="sys-id-label">MAX DAILY LOSS</span>
          <div class="sys-id-val" style="color: var(--error)" id="sc-sys-loss">
            3 UNITS
          </div>
        </div>
        <div class="sys-id-box">
          <span class="sys-id-label">ACTIVE CAPACITY</span>
          <div class="sys-id-val" id="sc-sys-cap">2 SLOTS</div>
        </div>
        <div class="sys-id-box">
          <span class="sys-id-label">SYSTEM STATUS</span>
          <div class="sys-id-val" style="color: var(--accent)">ACTIVE</div>
        </div>
      </div>

      <div class="sys-id-list">
        <div class="sys-id-list-title">
          <span>AUTHORIZED STRATEGIES</span>
          <span>[VERIFIED]</span>
        </div>
        <div id="sc-sys-setups">
          <!-- JS will populate strat list here -->
        </div>
      </div>

      <div class="sys-id-footer">
        <div class="sys-id-barcode"></div>
        <div class="sys-id-meta">
          AUTHORIZED BY<br />
          <strong>TRADING OS COMMAND</strong>
        </div>
      </div>
    </div>

    <!-- 2. Preview Modal (Where user downloads the image) -->
    <div
      id="sys-card-modal"
      class="sys-modal-overlay"
      style="
        display: none;
        backdrop-filter: blur(10px);
        background: rgba(0, 0, 0, 0.9);
      "
    >
      <div class="intel-modal-content" style="max-width: 500px; width: 100%">
        <h2
          style="
            color: #fff;
            font-family: var(--font-mono);
            margin-bottom: 15px;
            font-size: 14px;
            letter-spacing: 2px;
            text-align: center;
          "
        >
          SYSTEM CARD GENERATED
        </h2>

        <!-- Image Target -->
        <div style="display: flex; justify-content: center">
          <img
            id="sys-card-preview-img"
            src=""
            style="width: 100%; max-width: 350px"
          />
        </div>

        <div
          class="intel-actions"
          style="margin-top: 15px; justify-content: center"
        >
          <button
            class="btn-modal"
            onclick="
              document.getElementById('sys-card-modal').style.display = 'none'
            "
          >
            CLOSE
          </button>
          <button class="btn-modal primary" id="btn-download-sys-card">
            ‚¨á DOWNLOAD
          </button>
        </div>
      </div>
    </div>

    <!-- ==========================================================
     TRADE PLANNING MODAL (STRUCTURE ONLY - NO CONTENT YET)
========================================================== -->
    <div id="plan-modal" class="sys-modal hidden">
      <div class="sys-modal-content">
        <button id="close-plan-modal" class="btn-ghost modal-close-btn">
          ‚úñ
        </button>

        <!-- Content will be inserted here in Step 3 -->
        <div id="plan-modal-body" class="plan-modal-wrapper">
          <!-- Tabs -->
          <div class="plan-tabs">
            <button class="plan-tab" data-section="checklist">CHECKLIST</button>
            <button class="plan-tab" data-section="inputs">TRADE INPUTS</button>
          </div>

          <!-- Content Areas -->
          <div class="plan-content-area">
            <div id="tab-posCalc" class="plan-section active"></div>
            <div id="tab-checklist" class="plan-section"></div>
            <div id="tab-inputs" class="plan-section"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    id="reset-flow-modal"
    class="sys-modal-overlay"
    style="display: none; z-index: 100005"
  >
    <div
      class="terminal-box secure-terminal"
      style="width: 420px; background: #050505"
    >
      <div class="term-header">
        <div class="term-title" style="color: var(--accent)">
          SECURITY OVERRIDE
        </div>
        <button
          onclick="
            document.getElementById('reset-flow-modal').style.display = 'none'
          "
          style="background: none; border: none; color: #666; cursor: pointer"
        >
          ‚úï
        </button>
      </div>

      <div class="term-body" style="padding: 30px">
        <!-- STEP 1: INPUT EMAIL -->
        <div id="rst-step-1" class="auth-step active">
          <p
            style="
              color: #888;
              font-size: 11px;
              margin-bottom: 15px;
              font-family: var(--font-mono);
            "
          >
            > INITIATE IDENTITY VERIFICATION PROTOCOL
          </p>
          <div class="input-group">
            <label>OPERATOR EMAIL</label>
            <input
              id="rst-email"
              type="email"
              class="inp-std"
              placeholder="email@address.com"
            />
          </div>
          <button class="btn-tech" onclick="window.requestOTP()">
            SEND SECURE CODE >>
          </button>
        </div>

        <!-- STEP 2: VERIFY OTP -->
        <div id="rst-step-2" class="auth-step">
          <p
            style="
              color: var(--accent);
              font-size: 11px;
              margin-bottom: 15px;
              font-family: var(--font-mono);
            "
          >
            > CODE TRANSMITTED. CHECK INBOX.
          </p>
          <div class="input-group">
            <label>ENTER 6-DIGIT CODE</label>
            <input
              id="rst-otp"
              type="number"
              class="inp-std"
              placeholder="000000"
              style="text-align: center; letter-spacing: 5px; font-size: 18px"
            />
          </div>
          <button class="btn-tech" onclick="window.verifyOTP()">
            VERIFY IDENTITY >>
          </button>
          <div style="margin-top: 15px; text-align: center">
            <span
              style="
                font-size: 9px;
                color: #444;
                cursor: pointer;
                text-decoration: underline;
              "
              onclick="window.resetFlowStep(1)"
              >RESEND CODE</span
            >
          </div>
        </div>

        <!-- STEP 3: SUCCESS -->
        <div id="rst-step-3" class="auth-step">
          <div style="text-align: center; padding: 20px 0">
            <div style="font-size: 40px; margin-bottom: 10px">üîí</div>
            <h3
              style="
                color: #fff;
                font-family: var(--font-mono);
                font-size: 14px;
                margin-bottom: 10px;
              "
            >
              IDENTITY CONFIRMED
            </h3>
            <p style="color: #888; font-size: 11px; line-height: 1.5">
              Security protocols verified.
              <br /><br />
              <span style="color: var(--accent)"
                >A secure credential reset link has been dispatched to your
                email to finalize the new password.</span
              >
            </p>
          </div>
          <button
            class="btn-tech"
            onclick="
              document.getElementById('reset-flow-modal').style.display = 'none'
            "
          >
            CLOSE TERMINAL
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="loader" class="loader" style="display: none">SYNCING...</div>
</div>


<!-- Core System -->
<script type="module" src="core/config.js"></script>
<script type="module" src="utils/index.js"></script>
<script type="module" src="core/auth.js"></script>
<script type="module" src="core/data.js"></script>

<!-- Feature Modules -->
<script type="module" src="modules/modules.js"></script>

<!-- App Controller -->
<script type="module" src="main.js"></script>

</body>
</html>